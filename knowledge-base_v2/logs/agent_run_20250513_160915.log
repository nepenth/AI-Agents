2025-05-13 16:09:15 - root - INFO - Logging configured for target 'web' with level INFO. Log file: /home/nepenthe/git_repos/agents/knowledge-base_v2/logs/agent_run_20250513_160915.log
2025-05-13 16:09:15 - root - INFO - Logging configured for target 'web' with level INFO. Log file: /home/nepenthe/git_repos/agents/knowledge-base_v2/logs/agent_run_20250513_160915.log
2025-05-13 16:09:15 - __main__ - INFO - Configuration loaded successfully for web application.
2025-05-13 16:09:15 - engineio.server - INFO - Server initialized for threading.
2025-05-13 16:09:16 - __main__ - INFO - Initializing database tables...
2025-05-13 16:09:16 - __main__ - INFO - Database tables checked/created.
2025-05-13 16:09:16 - __main__ - INFO - Registered Flask blueprints.
2025-05-13 16:09:16 - knowledge_base_agent.web.sockets - INFO - SocketIO handlers registered for /agent and /logs namespaces.
2025-05-13 16:09:16 - __main__ - INFO - Registered SocketIO handlers.
2025-05-13 16:09:16 - __main__ - INFO - WebSocket log handler configured with emitter.
2025-05-13 16:09:16 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:16 - __main__ - INFO - Sending direct TEST message to /logs namespace...
2025-05-13 16:09:16 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:16 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:16 - __main__ - INFO - Direct TEST message emitted.
2025-05-13 16:09:16 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:16 - __main__ - INFO - Attempting to start the web server on port 5001...
2025-05-13 16:09:16 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:16 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.10.4:5001
2025-05-13 16:09:16 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:16 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-13 16:09:16 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet OPEN data {'sid': 'YcmlPW6CGkQUI0L9AAAA', 'upgrades': ['websocket'], 'pingTimeout': 20000, 'pingInterval': 25000, 'maxPayload': 1000000}
2025-05-13 16:09:17 - werkzeug - INFO - 10.0.11.66 - - [13/May/2025 16:09:17] "GET /socket.io/?EIO=4&transport=polling&t=y3g9bqg6 HTTP/1.1" 200 -
2025-05-13 16:09:17 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet MESSAGE data 0/agent,
2025-05-13 16:09:17 - knowledge_base_agent.web.sockets - INFO - Client connected to /agent namespace. Auth: None
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received request to upgrade to websocket
2025-05-13 16:09:17 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:17 - socketio.server - INFO - emitting event "status_update" to NKdZo5OGniexfNKQAAAB [/agent]
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["status_update",{"status":"idle"}]
2025-05-13 16:09:17 - werkzeug - INFO - 10.0.11.66 - - [13/May/2025 16:09:17] "GET /socket.io/?EIO=4&transport=polling&t=y3g9hqii&sid=YcmlPW6CGkQUI0L9AAAA HTTP/1.1" 200 -
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 0/agent,{"sid":"NKdZo5OGniexfNKQAAAB"}
2025-05-13 16:09:17 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:17 - werkzeug - INFO - 10.0.11.66 - - [13/May/2025 16:09:17] "POST /socket.io/?EIO=4&transport=polling&t=y3g9hene&sid=YcmlPW6CGkQUI0L9AAAA HTTP/1.1" 200 -
2025-05-13 16:09:17 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Upgrade to websocket successful
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet MESSAGE data 0/logs,
2025-05-13 16:09:17 - knowledge_base_agent.web.sockets - INFO - Client connected to /logs namespace. Auth: None
2025-05-13 16:09:17 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Client connected to /logs namespace. Auth: None"}]
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 0/logs,{"sid":"GL4DxXSJkkUEMQWqAAAC"}
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet MESSAGE data 2/agent,["get_status"]
2025-05-13 16:09:17 - socketio.server - INFO - received event "get_status" from NKdZo5OGniexfNKQAAAB [/agent]
2025-05-13 16:09:17 - socketio.server - INFO - emitting event "status_update" to NKdZo5OGniexfNKQAAAB [/agent]
2025-05-13 16:09:17 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["status_update",{"status":"idle"}]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet MESSAGE data 2/agent,["start_agent",{"run_only_phase":"Full","skip_fetch":false,"skip_git":true,"force_recache":false,"force_reinterpret":false,"force_recategorize":false,"force_regenerate":false}]
2025-05-13 16:09:21 - socketio.server - INFO - received event "start_agent" from NKdZo5OGniexfNKQAAAB [/agent]
2025-05-13 16:09:21 - knowledge_base_agent.web.sockets - INFO - Received start_agent request. Data: {'run_only_phase': 'Full', 'skip_fetch': False, 'skip_git': True, 'force_recache': False, 'force_reinterpret': False, 'force_recategorize': False, 'force_regenerate': False}
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Received start_agent request. Data: {'run_only_phase': 'Full', 'skip_fetch': False, 'skip_git': True, 'force_recache': False, 'force_reinterpret': False, 'force_recategorize': False, 'force_regenerate': False}"}]
2025-05-13 16:09:21 - __main__ - INFO - Attempting to start agent pipeline thread...
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to start agent pipeline thread..."}]
2025-05-13 16:09:21 - __main__ - INFO - Setting up background thread for pipeline...
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Setting up background thread for pipeline..."}]
2025-05-13 16:09:21 - __main__ - INFO - Pipeline background thread started.
2025-05-13 16:09:21 - __main__ - INFO - Pipeline background thread started successfully.
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Pipeline background thread started."}]
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - __main__ - INFO - (Web Thread) Initializing twscrape API and account pool...
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Pipeline background thread started successfully."}]
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Web Thread) Initializing twscrape API and account pool..."}]
2025-05-13 16:09:21 - __main__ - INFO - (Web Thread) twscrape API and pool initialized, accounts logged in.
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Web Thread) twscrape API and pool initialized, accounts logged in."}]
2025-05-13 16:09:21 - knowledge_base_agent.interfaces.http_client - INFO - HttpClientManager initialized. Base URL: 'None', Timeout: 10.0s Read
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: HttpClientManager initialized. Base URL: 'None', Timeout: 10.0s Read"}]
2025-05-13 16:09:21 - knowledge_base_agent.interfaces.ollama - INFO - OllamaClient initialized for URL: http://whyland-ai.nakedsun.xyz:11434/
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: OllamaClient initialized for URL: http://whyland-ai.nakedsun.xyz:11434/"}]
2025-05-13 16:09:21 - __main__ - INFO - (Web Thread) X credentials and bookmarks URL present, initializing Playwright client...
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Web Thread) X credentials and bookmarks URL present, initializing Playwright client..."}]
2025-05-13 16:09:21 - knowledge_base_agent.interfaces.playwright_client - INFO - PlaywrightClient (Sync API) initialized. Headless: True
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: PlaywrightClient (Sync API) initialized. Headless: True"}]
2025-05-13 16:09:21 - __main__ - INFO - (Web Thread) Attempting initial Playwright login...
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Web Thread) Attempting initial Playwright login..."}]
2025-05-13 16:09:21 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting X login via Playwright (sync in thread)...
2025-05-13 16:09:21 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:21 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting X login via Playwright (sync in thread)..."}]
2025-05-13 16:09:22 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Navigating to X login page: https://x.com/login
2025-05-13 16:09:22 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:22 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Navigating to X login page: https://x.com/login"}]
2025-05-13 16:09:27 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Entering username...
2025-05-13 16:09:27 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:27 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Entering username..."}]
2025-05-13 16:09:30 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Entering password...
2025-05-13 16:09:30 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:30 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Entering password..."}]
2025-05-13 16:09:30 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Waiting for login confirmation (e.g., navigation to home)...
2025-05-13 16:09:30 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:30 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Waiting for login confirmation (e.g., navigation to home)..."}]
2025-05-13 16:09:33 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) X Login successful.
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) X Login successful."}]
2025-05-13 16:09:33 - __main__ - INFO - (Web Thread) Playwright initial login appears successful.
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Web Thread) Playwright initial login appears successful."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.state - INFO - StateManager initialized. State file: /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: StateManager initialized. State file: /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.fetcher - INFO - Fetcher initialized.
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Fetcher initialized."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - AgentPipeline initialized.
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: AgentPipeline initialized."}]
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "status_update" to all [/agent]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["status_update",{"status":"running","message":"Agent starting..."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - --- Agent Pipeline Run Invoked ---
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Agent Pipeline Run Invoked ---"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - Run Preferences:
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Run Preferences:"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Run Only Phase: Full
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Run Only Phase: Full"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Skip Fetch Bookmarks: False
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Skip Fetch Bookmarks: False"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Skip Git Sync: False
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Skip Git Sync: False"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Skip Indexing: False
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Skip Indexing: False"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Force Re-cache Tweets: False
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Force Re-cache Tweets: False"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Force Re-interpret Media: False
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Force Re-interpret Media: False"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Force Re-categorize Content: False
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Force Re-categorize Content: False"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Force Re-generate KB Items: False
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Force Re-generate KB Items: False"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - Key Configuration Values:
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Key Configuration Values:"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Ollama URL: http://whyland-ai.nakedsun.xyz:11434/
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Ollama URL: http://whyland-ai.nakedsun.xyz:11434/"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Text Model: llama3.3:70b-instruct-q4_0
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Text Model: llama3.3:70b-instruct-q4_0"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Fallback Model: phi4-reasoning
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Fallback Model: phi4-reasoning"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Vision Model: mistral-small3.1
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Vision Model: mistral-small3.1"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Bookmark Fetching Possible (credentials present): True
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Bookmark Fetching Possible (credentials present): True"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - X Username: lockepacem
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - X Username: lockepacem"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - X Email: chris@whyland.net
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - X Email: chris@whyland.net"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - X Bookmarks URL: https://x.com/i/bookmarks/1866967731179794749
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - X Bookmarks URL: https://x.com/i/bookmarks/1866967731179794749"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Git Sync Enabled (config): False
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Git Sync Enabled (config): False"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Knowledge Base Dir: /home/nepenthe/git_repos/agents/knowledge-base_v2/kb-generated
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Knowledge Base Dir: /home/nepenthe/git_repos/agents/knowledge-base_v2/kb-generated"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Data Dir: /home/nepenthe/git_repos/agents/knowledge-base_v2/data
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Data Dir: /home/nepenthe/git_repos/agents/knowledge-base_v2/data"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO -   - Log Dir: /home/nepenthe/git_repos/agents/knowledge-base_v2/logs
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   - Log Dir: /home/nepenthe/git_repos/agents/knowledge-base_v2/logs"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - ------------------------------------
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: ------------------------------------"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - Run mode: 'Full Pipeline'
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Run mode: 'Full Pipeline'"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - Skipping phase 'GitSync' (Git Sync disabled in config).
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Skipping phase 'GitSync' (Git Sync disabled in config)."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - Total phases planned for this run: 8. Phases: ['InputAcquisition', 'Caching', 'Interpretation', 'Categorization', 'Generation', 'DBSync', 'Indexing', 'Finalizing']
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Total phases planned for this run: 8. Phases: ['InputAcquisition', 'Caching', 'Interpretation', 'Categorization', 'Generation', 'DBSync', 'Indexing', 'Finalizing']"}]
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"Loading State","current_item_id":"","eta":"--:--:--","total_phases":8,"current_phase_num":0,"overall_items_processed":0,"overall_total_items":0}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.state - INFO - Attempting to load state from /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json...
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to load state from /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json..."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.state - INFO - Successfully loaded state. Counts - Unprocessed: 0, Processed: 0, Cached: 0.
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Successfully loaded state. Counts - Unprocessed: 0, Processed: 0, Cached: 0."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.state - INFO -   Unprocessed IDs: set()
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   Unprocessed IDs: set()"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.state - INFO -   Cached IDs: []
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO:   Cached IDs: []"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.state - INFO - Performing state reconciliation...
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Performing state reconciliation..."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.state - INFO - State reconciliation completed. No major inconsistencies found.
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: State reconciliation completed. No major inconsistencies found."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - Loaded state. Total known items initially: 0. IDs: []
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Loaded state. Total known items initially: 0. IDs: []"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Overall Phase 1/8: InputAcquisition ---
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Overall Phase 1/8: InputAcquisition ---"}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.pipeline - INFO - Running Input Acquisition Phase...
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Running Input Acquisition Phase..."}]
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"InputAcquisition","current_item_id":"N/A","eta":"--:--:--","total_phases":8,"current_phase_num":1,"overall_items_processed":0,"overall_total_items":0}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.fetcher - INFO - [Fetcher] Attempting to fetch new tweet sources from X Bookmarks...
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Fetcher] Attempting to fetch new tweet sources from X Bookmarks..."}]
2025-05-13 16:09:33 - knowledge_base_agent.processing.fetcher - INFO - [Fetcher] Attempting to get bookmark URLs via Playwright client...
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Fetcher] Attempting to get bookmark URLs via Playwright client..."}]
2025-05-13 16:09:33 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to get bookmark URLs via Playwright (sync in thread)...
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to get bookmark URLs via Playwright (sync in thread)..."}]
2025-05-13 16:09:33 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Navigating to X Bookmarks page: https://x.com/i/bookmarks/1866967731179794749
2025-05-13 16:09:33 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Navigating to X Bookmarks page: https://x.com/i/bookmarks/1866967731179794749"}]
2025-05-13 16:09:35 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Waiting for initial tweet content to load...
2025-05-13 16:09:35 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:35 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Waiting for initial tweet content to load..."}]
2025-05-13 16:09:41 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scrolling bookmarks page. Scroll pixels: 1000. Wait after scroll: 5000ms. No change tries: 3. Max scroll attempts: 100.
2025-05-13 16:09:41 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:41 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scrolling bookmarks page. Scroll pixels: 1000. Wait after scroll: 5000ms. No change tries: 3. Max scroll attempts: 100."}]
2025-05-13 16:09:41 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 1/100. Found 12 new links this pass. Total unique raw: 12.
2025-05-13 16:09:41 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:41 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 1/100. Found 12 new links this pass. Total unique raw: 12."}]
2025-05-13 16:09:42 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:09:42 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:09:46 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (7815px). No change streak: 1/3.
2025-05-13 16:09:46 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:46 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (7815px). No change streak: 1/3."}]
2025-05-13 16:09:46 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 2/100. Found 3 new links this pass. Total unique raw: 15.
2025-05-13 16:09:46 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:46 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 2/100. Found 3 new links this pass. Total unique raw: 15."}]
2025-05-13 16:09:51 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 3/100. Found 6 new links this pass. Total unique raw: 21.
2025-05-13 16:09:51 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:51 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 3/100. Found 6 new links this pass. Total unique raw: 21."}]
2025-05-13 16:09:56 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (8990px). No change streak: 1/3.
2025-05-13 16:09:56 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:56 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (8990px). No change streak: 1/3."}]
2025-05-13 16:09:57 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 4/100. Found 2 new links this pass. Total unique raw: 23.
2025-05-13 16:09:57 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:09:57 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 4/100. Found 2 new links this pass. Total unique raw: 23."}]
2025-05-13 16:10:02 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 5/100. Found 6 new links this pass. Total unique raw: 29.
2025-05-13 16:10:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 5/100. Found 6 new links this pass. Total unique raw: 29."}]
2025-05-13 16:10:07 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:10:07 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:10:07 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (10144px). No change streak: 1/3.
2025-05-13 16:10:07 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:07 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (10144px). No change streak: 1/3."}]
2025-05-13 16:10:07 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 6/100. Found 7 new links this pass. Total unique raw: 36.
2025-05-13 16:10:07 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:07 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 6/100. Found 7 new links this pass. Total unique raw: 36."}]
2025-05-13 16:10:13 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 7/100. Found 6 new links this pass. Total unique raw: 42.
2025-05-13 16:10:13 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:13 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 7/100. Found 6 new links this pass. Total unique raw: 42."}]
2025-05-13 16:10:18 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 8/100. Found 5 new links this pass. Total unique raw: 47.
2025-05-13 16:10:18 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:18 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 8/100. Found 5 new links this pass. Total unique raw: 47."}]
2025-05-13 16:10:23 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 9/100. Found 3 new links this pass. Total unique raw: 50.
2025-05-13 16:10:23 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:23 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 9/100. Found 3 new links this pass. Total unique raw: 50."}]
2025-05-13 16:10:29 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 10/100. Found 8 new links this pass. Total unique raw: 58.
2025-05-13 16:10:29 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:29 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 10/100. Found 8 new links this pass. Total unique raw: 58."}]
2025-05-13 16:10:32 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:10:32 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:10:34 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 11/100. Found 0 new links this pass. Total unique raw: 58.
2025-05-13 16:10:34 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:34 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 11/100. Found 0 new links this pass. Total unique raw: 58."}]
2025-05-13 16:10:50 - knowledge_base_agent.interfaces.playwright_client - WARNING - (Sync) Timeout getting href for one link on scroll 12. Skipping this link.
2025-05-13 16:10:50 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:10:50 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: (Sync) Timeout getting href for one link on scroll 12. Skipping this link."}]
2025-05-13 16:10:57 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:10:57 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:11:00 - knowledge_base_agent.interfaces.playwright_client - WARNING - (Sync) Timeout getting href for one link on scroll 12. Skipping this link.
2025-05-13 16:11:00 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:00 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: (Sync) Timeout getting href for one link on scroll 12. Skipping this link."}]
2025-05-13 16:11:10 - knowledge_base_agent.interfaces.playwright_client - WARNING - (Sync) Timeout getting href for one link on scroll 12. Skipping this link.
2025-05-13 16:11:10 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:10 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: (Sync) Timeout getting href for one link on scroll 12. Skipping this link."}]
2025-05-13 16:11:20 - knowledge_base_agent.interfaces.playwright_client - WARNING - (Sync) Timeout getting href for one link on scroll 12. Skipping this link.
2025-05-13 16:11:20 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:20 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: (Sync) Timeout getting href for one link on scroll 12. Skipping this link."}]
2025-05-13 16:11:20 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 12/100. Found 17 new links this pass. Total unique raw: 75.
2025-05-13 16:11:20 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:20 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 12/100. Found 17 new links this pass. Total unique raw: 75."}]
2025-05-13 16:11:22 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:11:22 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:11:25 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 13/100. Found 6 new links this pass. Total unique raw: 81.
2025-05-13 16:11:25 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:25 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 13/100. Found 6 new links this pass. Total unique raw: 81."}]
2025-05-13 16:11:30 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (42287px). No change streak: 1/3.
2025-05-13 16:11:30 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:30 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (42287px). No change streak: 1/3."}]
2025-05-13 16:11:30 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 14/100. Found 3 new links this pass. Total unique raw: 84.
2025-05-13 16:11:30 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:30 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 14/100. Found 3 new links this pass. Total unique raw: 84."}]
2025-05-13 16:11:36 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 15/100. Found 6 new links this pass. Total unique raw: 90.
2025-05-13 16:11:36 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:36 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 15/100. Found 6 new links this pass. Total unique raw: 90."}]
2025-05-13 16:11:41 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (43464px). No change streak: 1/3.
2025-05-13 16:11:41 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:41 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (43464px). No change streak: 1/3."}]
2025-05-13 16:11:41 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 16/100. Found 3 new links this pass. Total unique raw: 93.
2025-05-13 16:11:41 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:41 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 16/100. Found 3 new links this pass. Total unique raw: 93."}]
2025-05-13 16:11:46 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (43464px). No change streak: 2/3.
2025-05-13 16:11:46 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:46 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (43464px). No change streak: 2/3."}]
2025-05-13 16:11:46 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 17/100. Found 3 new links this pass. Total unique raw: 96.
2025-05-13 16:11:46 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:46 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 17/100. Found 3 new links this pass. Total unique raw: 96."}]
2025-05-13 16:11:47 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:11:47 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:11:52 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 18/100. Found 5 new links this pass. Total unique raw: 101.
2025-05-13 16:11:52 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:52 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 18/100. Found 5 new links this pass. Total unique raw: 101."}]
2025-05-13 16:11:57 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (44692px). No change streak: 1/3.
2025-05-13 16:11:57 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:57 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (44692px). No change streak: 1/3."}]
2025-05-13 16:11:57 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 19/100. Found 3 new links this pass. Total unique raw: 104.
2025-05-13 16:11:57 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:11:57 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 19/100. Found 3 new links this pass. Total unique raw: 104."}]
2025-05-13 16:12:02 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (44692px). No change streak: 2/3.
2025-05-13 16:12:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (44692px). No change streak: 2/3."}]
2025-05-13 16:12:02 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 20/100. Found 3 new links this pass. Total unique raw: 107.
2025-05-13 16:12:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 20/100. Found 3 new links this pass. Total unique raw: 107."}]
2025-05-13 16:12:08 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 21/100. Found 8 new links this pass. Total unique raw: 115.
2025-05-13 16:12:08 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:08 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 21/100. Found 8 new links this pass. Total unique raw: 115."}]
2025-05-13 16:12:12 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:12:12 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:12:14 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 22/100. Found 7 new links this pass. Total unique raw: 122.
2025-05-13 16:12:14 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:14 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 22/100. Found 7 new links this pass. Total unique raw: 122."}]
2025-05-13 16:12:19 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 23/100. Found 6 new links this pass. Total unique raw: 128.
2025-05-13 16:12:19 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:19 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 23/100. Found 6 new links this pass. Total unique raw: 128."}]
2025-05-13 16:12:24 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 24/100. Found 3 new links this pass. Total unique raw: 131.
2025-05-13 16:12:24 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:24 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 24/100. Found 3 new links this pass. Total unique raw: 131."}]
2025-05-13 16:12:30 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 25/100. Found 6 new links this pass. Total unique raw: 137.
2025-05-13 16:12:30 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:30 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 25/100. Found 6 new links this pass. Total unique raw: 137."}]
2025-05-13 16:12:35 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 26/100. Found 3 new links this pass. Total unique raw: 140.
2025-05-13 16:12:35 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:35 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 26/100. Found 3 new links this pass. Total unique raw: 140."}]
2025-05-13 16:12:37 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:12:37 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:12:40 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (117953px). No change streak: 1/3.
2025-05-13 16:12:40 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:40 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (117953px). No change streak: 1/3."}]
2025-05-13 16:12:40 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 27/100. Found 2 new links this pass. Total unique raw: 142.
2025-05-13 16:12:40 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:40 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 27/100. Found 2 new links this pass. Total unique raw: 142."}]
2025-05-13 16:12:45 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 28/100. Found 7 new links this pass. Total unique raw: 149.
2025-05-13 16:12:45 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:45 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 28/100. Found 7 new links this pass. Total unique raw: 149."}]
2025-05-13 16:12:50 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (118513px). No change streak: 1/3.
2025-05-13 16:12:50 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:50 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (118513px). No change streak: 1/3."}]
2025-05-13 16:12:51 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 29/100. Found 0 new links this pass. Total unique raw: 149.
2025-05-13 16:12:51 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:51 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 29/100. Found 0 new links this pass. Total unique raw: 149."}]
2025-05-13 16:12:56 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (118513px). No change streak: 2/3.
2025-05-13 16:12:56 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:56 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (118513px). No change streak: 2/3."}]
2025-05-13 16:12:56 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll attempt 30/100. Found 0 new links this pass. Total unique raw: 149.
2025-05-13 16:12:56 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:12:56 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll attempt 30/100. Found 0 new links this pass. Total unique raw: 149."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Scroll height unchanged (118513px). No change streak: 3/3.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Scroll height unchanged (118513px). No change streak: 3/3."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) No new content after multiple scroll attempts with no height change. Assuming end of dynamic content.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) No new content after multiple scroll attempts with no height change. Assuming end of dynamic content."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) --- STARTING FILTERING --- Raw links collected: 149
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) --- STARTING FILTERING --- Raw links collected: 149"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Filtering: After string type check: 149 links remain.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Filtering: After string type check: 149 links remain."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Filtering: After removing '/analytics': 98 links remain.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Filtering: After removing '/analytics': 98 links remain."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Filtering: After removing auxiliary links (e.g. /replies, /likes) and ensuring it's a status link: 97 links remain.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Filtering: After removing auxiliary links (e.g. /replies, /likes) and ensuring it's a status link: 97 links remain."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) --- FILTERING COMPLETE --- Final unique bookmark URLs: 97.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) --- FILTERING COMPLETE --- Final unique bookmark URLs: 97."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.fetcher - INFO - [Fetcher] Found 97 potential bookmark links from Playwright. Extracting tweet IDs and URLs...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Fetcher] Found 97 potential bookmark links from Playwright. Extracting tweet IDs and URLs..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.fetcher - INFO - [Fetcher] Extracted 52 unique tweet_id-URL pairs from 97 potential links.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Fetcher] Extracted 52 unique tweet_id-URL pairs from 97 potential links."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.fetcher - INFO - [Fetcher] Found 52 tweet_id-URL pairs from X Bookmarks.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Fetcher] Found 52 tweet_id-URL pairs from X Bookmarks."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.fetcher - INFO - [Fetcher] Total new unique tweet_id-URL pairs acquired for processing: 52
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Fetcher] Total new unique tweet_id-URL pairs acquired for processing: 52"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - Fetcher provided 52 new tweet_id-URL pairs.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Fetcher provided 52 new tweet_id-URL pairs."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.state - INFO - Added 52 new tweet IDs to the unprocessed set.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Added 52 new tweet IDs to the unprocessed set."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - 52 IDs were newly added to the unprocessed set by StateManager.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: 52 IDs were newly added to the unprocessed set by StateManager."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.state - INFO - Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.state - INFO - Successfully saved state. 52 unprocessed, 0 processed.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Successfully saved state. 52 unprocessed, 0 processed."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - Input Acquisition Phase completed.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Input Acquisition Phase completed."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - After Input Acquisition. Total known items now: 52 (Added: 52). IDs: ['1913247655909626182', '1878628030614290897', '1876132847385534848', '1918645768606335054', '1879929763323924860', '1918917910573322656', '1891632470207979646', '1919110045687595120', '1919485829996794280', '1908523999467892865', '1866615462844383425', '1915492640604492119', '1919136851987755305', '1919318992843620593', '1919335714036077033', '1871786708125323441', '1919039905381880181', '1909942573923197054', '1885016511850659903', '1911084003957833860']...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: After Input Acquisition. Total known items now: 52 (Added: 52). IDs: ['1913247655909626182', '1878628030614290897', '1876132847385534848', '1918645768606335054', '1879929763323924860', '1918917910573322656', '1891632470207979646', '1919110045687595120', '1919485829996794280', '1908523999467892865', '1866615462844383425', '1915492640604492119', '1919136851987755305', '1919318992843620593', '1919335714036077033', '1871786708125323441', '1919039905381880181', '1909942573923197054', '1885016511850659903', '1911084003957833860']..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Overall Phase 1/8: InputAcquisition ---
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Overall Phase 1/8: InputAcquisition ---"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Overall Phase 2/8: Caching ---
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Overall Phase 2/8: Caching ---"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Phase: Caching --- (Overall Pipeline Step 2/8)
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Phase: Caching --- (Overall Pipeline Step 2/8)"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - [Caching] Identified 52 items for processing in this batch.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Caching] Identified 52 items for processing in this batch."}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":52,"current_phase":"Caching (1/1)","current_item_id":"","eta":"--:--:--","total_phases":8,"current_phase_num":2,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - INFO - [Caching] Awaiting 52 tasks...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Caching] Awaiting 52 tasks..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1913247655909626182 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1913247655909626182 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1913247655909626182. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1913247655909626182. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/learnk8s/status/1913247655909626182 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/learnk8s/status/1913247655909626182 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1878628030614290897 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1878628030614290897 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1878628030614290897. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1878628030614290897. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/Python_Dv/status/1878628030614290897 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/Python_Dv/status/1878628030614290897 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1876132847385534848 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/Python_Dv/status/1878628030614290897: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1876132847385534848 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1876132847385534848. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/Python_Dv/status/1878628030614290897: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1876132847385534848. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/sahnlam/status/1876132847385534848 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/sahnlam/status/1876132847385534848 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1918645768606335054 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1918645768606335054 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/sahnlam/status/1876132847385534848: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1918645768606335054. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/sahnlam/status/1876132847385534848: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1918645768606335054. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/ezekiel_aleke/status/1918645768606335054 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/ezekiel_aleke/status/1918645768606335054 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1879929763323924860 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1879929763323924860 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1879929763323924860. Current cache_complete: False
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/ezekiel_aleke/status/1918645768606335054: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1879929763323924860. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/benln/status/1879929763323924860 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/ezekiel_aleke/status/1918645768606335054: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/benln/status/1879929763323924860 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/Python_Dv/status/1878628030614290897: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/benln/status/1879929763323924860: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/Python_Dv/status/1878628030614290897: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1878628030614290897 (URL: https://x.com/Python_Dv/status/1878628030614290897): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/benln/status/1879929763323924860: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1878628030614290897 (URL: https://x.com/Python_Dv/status/1878628030614290897): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1878628030614290897: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/Python_Dv/status/1878628030614290897: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1878628030614290897: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/Python_Dv/status/1878628030614290897: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/sahnlam/status/1876132847385534848: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/sahnlam/status/1876132847385534848: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1876132847385534848 (URL: https://x.com/sahnlam/status/1876132847385534848): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1876132847385534848 (URL: https://x.com/sahnlam/status/1876132847385534848): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1876132847385534848: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sahnlam/status/1876132847385534848: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1876132847385534848: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sahnlam/status/1876132847385534848: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/ezekiel_aleke/status/1918645768606335054: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/ezekiel_aleke/status/1918645768606335054: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1918645768606335054 (URL: https://x.com/ezekiel_aleke/status/1918645768606335054): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1918645768606335054 (URL: https://x.com/ezekiel_aleke/status/1918645768606335054): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1918645768606335054: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/ezekiel_aleke/status/1918645768606335054: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1918645768606335054: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/ezekiel_aleke/status/1918645768606335054: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1918917910573322656 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1918917910573322656 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1918917910573322656. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1918917910573322656. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/LawrenceNg119/status/1918917910573322656 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/LawrenceNg119/status/1918917910573322656 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1891632470207979646 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1891632470207979646 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1891632470207979646. Current cache_complete: False
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/LawrenceNg119/status/1918917910573322656: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1891632470207979646. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/rileybrown_ai/status/1891632470207979646 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/LawrenceNg119/status/1918917910573322656: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/rileybrown_ai/status/1891632470207979646 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919110045687595120 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/rileybrown_ai/status/1891632470207979646: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919110045687595120 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919110045687595120. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/rileybrown_ai/status/1891632470207979646: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919110045687595120. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/thatstraw/status/1919110045687595120 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/thatstraw/status/1919110045687595120 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/benln/status/1879929763323924860: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/thatstraw/status/1919110045687595120: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/benln/status/1879929763323924860: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1879929763323924860 (URL: https://x.com/benln/status/1879929763323924860): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/thatstraw/status/1919110045687595120: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1879929763323924860 (URL: https://x.com/benln/status/1879929763323924860): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1879929763323924860: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/benln/status/1879929763323924860: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1879929763323924860: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/benln/status/1879929763323924860: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919485829996794280 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919485829996794280 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919485829996794280. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919485829996794280. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/BrianRoemmele/status/1919485829996794280 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/BrianRoemmele/status/1919485829996794280 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/LawrenceNg119/status/1918917910573322656: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/BrianRoemmele/status/1919485829996794280: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/LawrenceNg119/status/1918917910573322656: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1918917910573322656 (URL: https://x.com/LawrenceNg119/status/1918917910573322656): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/BrianRoemmele/status/1919485829996794280: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1918917910573322656 (URL: https://x.com/LawrenceNg119/status/1918917910573322656): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1918917910573322656: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/LawrenceNg119/status/1918917910573322656: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1918917910573322656: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/LawrenceNg119/status/1918917910573322656: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/rileybrown_ai/status/1891632470207979646: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Navigating to tweet page: https://x.com/learnk8s/status/1913247655909626182
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/rileybrown_ai/status/1891632470207979646: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1891632470207979646 (URL: https://x.com/rileybrown_ai/status/1891632470207979646): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Navigating to tweet page: https://x.com/learnk8s/status/1913247655909626182"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1891632470207979646 (URL: https://x.com/rileybrown_ai/status/1891632470207979646): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1891632470207979646: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/rileybrown_ai/status/1891632470207979646: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/learnk8s/status/1913247655909626182: Page.goto: Object of type HttpUrl is not JSON serializable
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1891632470207979646: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/rileybrown_ai/status/1891632470207979646: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/thatstraw/status/1919110045687595120: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/learnk8s/status/1913247655909626182: Page.goto: Object of type HttpUrl is not JSON serializable\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/thatstraw/status/1919110045687595120: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919110045687595120 (URL: https://x.com/thatstraw/status/1919110045687595120): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919110045687595120 (URL: https://x.com/thatstraw/status/1919110045687595120): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919110045687595120: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/thatstraw/status/1919110045687595120: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919110045687595120: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/thatstraw/status/1919110045687595120: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1908523999467892865 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1908523999467892865 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1908523999467892865. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1908523999467892865. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/BdKozlovski/status/1908523999467892865 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/BdKozlovski/status/1908523999467892865 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1866615462844383425 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/BdKozlovski/status/1908523999467892865: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1866615462844383425 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1866615462844383425. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/BdKozlovski/status/1908523999467892865: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1866615462844383425. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/tom_doerr/status/1866615462844383425 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/tom_doerr/status/1866615462844383425 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1915492640604492119 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1915492640604492119 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1915492640604492119. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/tom_doerr/status/1866615462844383425: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1915492640604492119. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/llama_index/status/1915492640604492119 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/tom_doerr/status/1866615462844383425: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/llama_index/status/1915492640604492119 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/BrianRoemmele/status/1919485829996794280: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/llama_index/status/1915492640604492119: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/BrianRoemmele/status/1919485829996794280: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919485829996794280 (URL: https://x.com/BrianRoemmele/status/1919485829996794280): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/llama_index/status/1915492640604492119: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919485829996794280 (URL: https://x.com/BrianRoemmele/status/1919485829996794280): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919485829996794280: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/BrianRoemmele/status/1919485829996794280: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919485829996794280: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/BrianRoemmele/status/1919485829996794280: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919136851987755305 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919136851987755305 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919136851987755305. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919136851987755305. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/tom_doerr/status/1919136851987755305 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/tom_doerr/status/1919136851987755305 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/BdKozlovski/status/1908523999467892865: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/tom_doerr/status/1919136851987755305: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/BdKozlovski/status/1908523999467892865: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1908523999467892865 (URL: https://x.com/BdKozlovski/status/1908523999467892865): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/tom_doerr/status/1919136851987755305: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1908523999467892865 (URL: https://x.com/BdKozlovski/status/1908523999467892865): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1908523999467892865: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/BdKozlovski/status/1908523999467892865: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1908523999467892865: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/BdKozlovski/status/1908523999467892865: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/tom_doerr/status/1866615462844383425: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/tom_doerr/status/1866615462844383425: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1866615462844383425 (URL: https://x.com/tom_doerr/status/1866615462844383425): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1866615462844383425 (URL: https://x.com/tom_doerr/status/1866615462844383425): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1866615462844383425: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/tom_doerr/status/1866615462844383425: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1866615462844383425: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/tom_doerr/status/1866615462844383425: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/llama_index/status/1915492640604492119: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/llama_index/status/1915492640604492119: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1915492640604492119 (URL: https://x.com/llama_index/status/1915492640604492119): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1915492640604492119 (URL: https://x.com/llama_index/status/1915492640604492119): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1915492640604492119: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/llama_index/status/1915492640604492119: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1915492640604492119: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/llama_index/status/1915492640604492119: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919318992843620593 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919318992843620593 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919318992843620593. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919318992843620593. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/hasantoxr/status/1919318992843620593 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/hasantoxr/status/1919318992843620593 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919335714036077033 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919335714036077033 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919335714036077033. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919335714036077033. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/ezekiel_aleke/status/1919335714036077033 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/ezekiel_aleke/status/1919335714036077033 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1871786708125323441 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1871786708125323441 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1871786708125323441. Current cache_complete: False
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/ezekiel_aleke/status/1919335714036077033: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1871786708125323441. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/sahnlam/status/1871786708125323441 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/ezekiel_aleke/status/1919335714036077033: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/sahnlam/status/1871786708125323441 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/learnk8s/status/1913247655909626182: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/sahnlam/status/1871786708125323441: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/learnk8s/status/1913247655909626182: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1913247655909626182 (URL: https://x.com/learnk8s/status/1913247655909626182): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/sahnlam/status/1871786708125323441: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1913247655909626182 (URL: https://x.com/learnk8s/status/1913247655909626182): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1913247655909626182: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/learnk8s/status/1913247655909626182: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1913247655909626182: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/learnk8s/status/1913247655909626182: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/tom_doerr/status/1919136851987755305: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/tom_doerr/status/1919136851987755305: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919136851987755305 (URL: https://x.com/tom_doerr/status/1919136851987755305): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919136851987755305 (URL: https://x.com/tom_doerr/status/1919136851987755305): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919136851987755305: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/tom_doerr/status/1919136851987755305: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919136851987755305: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/tom_doerr/status/1919136851987755305: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919039905381880181 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919039905381880181 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919039905381880181. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919039905381880181. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/godofprompt/status/1919039905381880181 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/godofprompt/status/1919039905381880181 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1909942573923197054 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/godofprompt/status/1919039905381880181: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1909942573923197054 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1909942573923197054. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/godofprompt/status/1919039905381880181: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1909942573923197054. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/theskilledcoder/status/1909942573923197054 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Navigating to tweet page: https://x.com/hasantoxr/status/1919318992843620593
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/theskilledcoder/status/1909942573923197054 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/ezekiel_aleke/status/1919335714036077033: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/theskilledcoder/status/1909942573923197054: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Navigating to tweet page: https://x.com/hasantoxr/status/1919318992843620593"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/ezekiel_aleke/status/1919335714036077033: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919335714036077033 (URL: https://x.com/ezekiel_aleke/status/1919335714036077033): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/theskilledcoder/status/1909942573923197054: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919335714036077033 (URL: https://x.com/ezekiel_aleke/status/1919335714036077033): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919335714036077033: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/ezekiel_aleke/status/1919335714036077033: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/hasantoxr/status/1919318992843620593: Page.goto: Object of type HttpUrl is not JSON serializable
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919335714036077033: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/ezekiel_aleke/status/1919335714036077033: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/sahnlam/status/1871786708125323441: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/hasantoxr/status/1919318992843620593: Page.goto: Object of type HttpUrl is not JSON serializable\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/sahnlam/status/1871786708125323441: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1871786708125323441 (URL: https://x.com/sahnlam/status/1871786708125323441): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1871786708125323441 (URL: https://x.com/sahnlam/status/1871786708125323441): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1871786708125323441: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sahnlam/status/1871786708125323441: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1871786708125323441: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sahnlam/status/1871786708125323441: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1885016511850659903 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1885016511850659903 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1885016511850659903. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1885016511850659903. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/KaranVaidya6/status/1885016511850659903 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/KaranVaidya6/status/1885016511850659903 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1911084003957833860 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1911084003957833860 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/KaranVaidya6/status/1885016511850659903: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1911084003957833860. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/KaranVaidya6/status/1885016511850659903: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1911084003957833860. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/alexxubyte/status/1911084003957833860 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/alexxubyte/status/1911084003957833860 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/godofprompt/status/1919039905381880181: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/godofprompt/status/1919039905381880181: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919039905381880181 (URL: https://x.com/godofprompt/status/1919039905381880181): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919039905381880181 (URL: https://x.com/godofprompt/status/1919039905381880181): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919039905381880181: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/godofprompt/status/1919039905381880181: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919039905381880181: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/godofprompt/status/1919039905381880181: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/theskilledcoder/status/1909942573923197054: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/theskilledcoder/status/1909942573923197054: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1909942573923197054 (URL: https://x.com/theskilledcoder/status/1909942573923197054): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1909942573923197054 (URL: https://x.com/theskilledcoder/status/1909942573923197054): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1909942573923197054: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/theskilledcoder/status/1909942573923197054: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1909942573923197054: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/theskilledcoder/status/1909942573923197054: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1883134699800867289 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1883134699800867289 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1883134699800867289. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1883134699800867289. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/mydevlprplanet/status/1883134699800867289 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/mydevlprplanet/status/1883134699800867289 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1915355627259408863 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/mydevlprplanet/status/1883134699800867289: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1915355627259408863 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1915355627259408863. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/mydevlprplanet/status/1883134699800867289: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1915355627259408863. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/tom_doerr/status/1915355627259408863 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/tom_doerr/status/1915355627259408863 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/hasantoxr/status/1919318992843620593: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/tom_doerr/status/1915355627259408863: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/hasantoxr/status/1919318992843620593: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919318992843620593 (URL: https://x.com/hasantoxr/status/1919318992843620593): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/tom_doerr/status/1915355627259408863: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919318992843620593 (URL: https://x.com/hasantoxr/status/1919318992843620593): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919318992843620593: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/hasantoxr/status/1919318992843620593: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919318992843620593: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/hasantoxr/status/1919318992843620593: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/KaranVaidya6/status/1885016511850659903: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/KaranVaidya6/status/1885016511850659903: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1885016511850659903 (URL: https://x.com/KaranVaidya6/status/1885016511850659903): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1885016511850659903 (URL: https://x.com/KaranVaidya6/status/1885016511850659903): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1885016511850659903: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/KaranVaidya6/status/1885016511850659903: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1885016511850659903: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/KaranVaidya6/status/1885016511850659903: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1921781985569345995 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1921781985569345995 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1921781985569345995. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1921781985569345995. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/ashishps_1/status/1921781985569345995 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/ashishps_1/status/1921781985569345995 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1920357544083460377 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1920357544083460377 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/ashishps_1/status/1921781985569345995: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1920357544083460377. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/ashishps_1/status/1921781985569345995: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1920357544083460377. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/GithubProjects/status/1920357544083460377 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/GithubProjects/status/1920357544083460377 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/mydevlprplanet/status/1883134699800867289: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/mydevlprplanet/status/1883134699800867289: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1883134699800867289 (URL: https://x.com/mydevlprplanet/status/1883134699800867289): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/GithubProjects/status/1920357544083460377: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1883134699800867289 (URL: https://x.com/mydevlprplanet/status/1883134699800867289): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1883134699800867289: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/mydevlprplanet/status/1883134699800867289: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/GithubProjects/status/1920357544083460377: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1883134699800867289: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/mydevlprplanet/status/1883134699800867289: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/tom_doerr/status/1915355627259408863: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Navigating to tweet page: https://x.com/alexxubyte/status/1911084003957833860
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/tom_doerr/status/1915355627259408863: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1915355627259408863 (URL: https://x.com/tom_doerr/status/1915355627259408863): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Navigating to tweet page: https://x.com/alexxubyte/status/1911084003957833860"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1915355627259408863 (URL: https://x.com/tom_doerr/status/1915355627259408863): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1915355627259408863: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/tom_doerr/status/1915355627259408863: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1915355627259408863: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/tom_doerr/status/1915355627259408863: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/alexxubyte/status/1911084003957833860: Page.goto: Object of type HttpUrl is not JSON serializable
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1911343729694175647 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/alexxubyte/status/1911084003957833860: Page.goto: Object of type HttpUrl is not JSON serializable\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1911343729694175647 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1911343729694175647. Current cache_complete: False
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1911343729694175647. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/bibryam/status/1911343729694175647 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/bibryam/status/1911343729694175647 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919362218749042844 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919362218749042844 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919362218749042844. Current cache_complete: False
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/bibryam/status/1911343729694175647: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919362218749042844. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/NikkiSiapno/status/1919362218749042844 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/bibryam/status/1911343729694175647: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/NikkiSiapno/status/1919362218749042844 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/ashishps_1/status/1921781985569345995: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/ashishps_1/status/1921781985569345995: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1921781985569345995 (URL: https://x.com/ashishps_1/status/1921781985569345995): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1921781985569345995 (URL: https://x.com/ashishps_1/status/1921781985569345995): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1921781985569345995: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/ashishps_1/status/1921781985569345995: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1921781985569345995: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/ashishps_1/status/1921781985569345995: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/GithubProjects/status/1920357544083460377: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/GithubProjects/status/1920357544083460377: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1920357544083460377 (URL: https://x.com/GithubProjects/status/1920357544083460377): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1920357544083460377 (URL: https://x.com/GithubProjects/status/1920357544083460377): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1920357544083460377: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/GithubProjects/status/1920357544083460377: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1920357544083460377: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/GithubProjects/status/1920357544083460377: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1874753711656009963 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1874753711656009963 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1874753711656009963. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1874753711656009963. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/sysxplore/status/1874753711656009963 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/sysxplore/status/1874753711656009963 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1877734236003742011 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/sysxplore/status/1874753711656009963: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1877734236003742011 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1877734236003742011. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/sysxplore/status/1874753711656009963: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1877734236003742011. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/sysxplore/status/1877734236003742011 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/sysxplore/status/1877734236003742011 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/alexxubyte/status/1911084003957833860: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/sysxplore/status/1877734236003742011: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/alexxubyte/status/1911084003957833860: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1911084003957833860 (URL: https://x.com/alexxubyte/status/1911084003957833860): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/sysxplore/status/1877734236003742011: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1911084003957833860 (URL: https://x.com/alexxubyte/status/1911084003957833860): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1911084003957833860: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/alexxubyte/status/1911084003957833860: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1911084003957833860: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/alexxubyte/status/1911084003957833860: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/bibryam/status/1911343729694175647: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/bibryam/status/1911343729694175647: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1911343729694175647 (URL: https://x.com/bibryam/status/1911343729694175647): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1911343729694175647 (URL: https://x.com/bibryam/status/1911343729694175647): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.pipeline - WARNING - Item 1911343729694175647: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/bibryam/status/1911343729694175647: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1911343729694175647: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/bibryam/status/1911343729694175647: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1867918614302458014 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1867918614302458014 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1867918614302458014. Current cache_complete: False
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1867918614302458014. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/techyoutbe/status/1867918614302458014 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/techyoutbe/status/1867918614302458014 via Playwright (sync in thread)..."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Tweet 1912758276481228916 is not cache-complete. Processing.
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1912758276481228916 is not cache-complete. Processing."}]
2025-05-13 16:13:01 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1912758276481228916. Current cache_complete: False
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/techyoutbe/status/1867918614302458014: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1912758276481228916. Current cache_complete: False"}]
2025-05-13 16:13:01 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/_avichawla/status/1912758276481228916 via Playwright (sync in thread)...
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:01 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/techyoutbe/status/1867918614302458014: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:01 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Navigating to tweet page: https://x.com/NikkiSiapno/status/1919362218749042844
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/_avichawla/status/1912758276481228916 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/sysxplore/status/1874753711656009963: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/_avichawla/status/1912758276481228916: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Navigating to tweet page: https://x.com/NikkiSiapno/status/1919362218749042844"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/sysxplore/status/1874753711656009963: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1874753711656009963 (URL: https://x.com/sysxplore/status/1874753711656009963): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/_avichawla/status/1912758276481228916: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1874753711656009963 (URL: https://x.com/sysxplore/status/1874753711656009963): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1874753711656009963: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sysxplore/status/1874753711656009963: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/NikkiSiapno/status/1919362218749042844: Page.goto: Object of type HttpUrl is not JSON serializable
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1874753711656009963: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sysxplore/status/1874753711656009963: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/sysxplore/status/1877734236003742011: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/NikkiSiapno/status/1919362218749042844: Page.goto: Object of type HttpUrl is not JSON serializable\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/sysxplore/status/1877734236003742011: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1877734236003742011 (URL: https://x.com/sysxplore/status/1877734236003742011): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1877734236003742011 (URL: https://x.com/sysxplore/status/1877734236003742011): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1877734236003742011: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sysxplore/status/1877734236003742011: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1877734236003742011: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sysxplore/status/1877734236003742011: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919953003525587372 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919953003525587372 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919953003525587372. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919953003525587372. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/GithubProjects/status/1919953003525587372 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/GithubProjects/status/1919953003525587372 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1918917563825938645 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1918917563825938645 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1918917563825938645. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/GithubProjects/status/1919953003525587372: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1918917563825938645. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/_avichawla/status/1918917563825938645 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/GithubProjects/status/1919953003525587372: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/_avichawla/status/1918917563825938645 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/techyoutbe/status/1867918614302458014: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/techyoutbe/status/1867918614302458014: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1867918614302458014 (URL: https://x.com/techyoutbe/status/1867918614302458014): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1867918614302458014 (URL: https://x.com/techyoutbe/status/1867918614302458014): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1867918614302458014: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/techyoutbe/status/1867918614302458014: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1867918614302458014: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/techyoutbe/status/1867918614302458014: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/_avichawla/status/1912758276481228916: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/_avichawla/status/1912758276481228916: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1912758276481228916 (URL: https://x.com/_avichawla/status/1912758276481228916): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1912758276481228916 (URL: https://x.com/_avichawla/status/1912758276481228916): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1912758276481228916: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/_avichawla/status/1912758276481228916: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1912758276481228916: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/_avichawla/status/1912758276481228916: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1918901182560714906 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1918901182560714906 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1918901182560714906. Current cache_complete: False
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1918901182560714906. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/techyoutbe/status/1918901182560714906 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/techyoutbe/status/1918901182560714906 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1921822976170655926 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1921822976170655926 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1921822976170655926. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1921822976170655926. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/techyoutbe/status/1918901182560714906: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/NikkiSiapno/status/1921822976170655926 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/techyoutbe/status/1918901182560714906: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/NikkiSiapno/status/1921822976170655926 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/NikkiSiapno/status/1919362218749042844: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/NikkiSiapno/status/1921822976170655926: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/NikkiSiapno/status/1919362218749042844: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919362218749042844 (URL: https://x.com/NikkiSiapno/status/1919362218749042844): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/NikkiSiapno/status/1921822976170655926: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919362218749042844 (URL: https://x.com/NikkiSiapno/status/1919362218749042844): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919362218749042844: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/NikkiSiapno/status/1919362218749042844: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919362218749042844: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/NikkiSiapno/status/1919362218749042844: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/GithubProjects/status/1919953003525587372: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/GithubProjects/status/1919953003525587372: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919953003525587372 (URL: https://x.com/GithubProjects/status/1919953003525587372): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919953003525587372 (URL: https://x.com/GithubProjects/status/1919953003525587372): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919953003525587372: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/GithubProjects/status/1919953003525587372: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919953003525587372: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/GithubProjects/status/1919953003525587372: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1909859367773483332 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1909859367773483332 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1909859367773483332. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1909859367773483332. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/devops_tech/status/1909859367773483332 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/devops_tech/status/1909859367773483332 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1920069397277774228 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1920069397277774228 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1920069397277774228. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1920069397277774228. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/rohanpaul_ai/status/1920069397277774228 via Playwright (sync in thread)...
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/devops_tech/status/1909859367773483332: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/rohanpaul_ai/status/1920069397277774228 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/devops_tech/status/1909859367773483332: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/techyoutbe/status/1918901182560714906: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/rohanpaul_ai/status/1920069397277774228: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/techyoutbe/status/1918901182560714906: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1918901182560714906 (URL: https://x.com/techyoutbe/status/1918901182560714906): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/rohanpaul_ai/status/1920069397277774228: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Navigating to tweet page: https://x.com/_avichawla/status/1918917563825938645
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1918901182560714906 (URL: https://x.com/techyoutbe/status/1918901182560714906): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1918901182560714906: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/techyoutbe/status/1918901182560714906: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Navigating to tweet page: https://x.com/_avichawla/status/1918917563825938645"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1918901182560714906: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/techyoutbe/status/1918901182560714906: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/NikkiSiapno/status/1921822976170655926: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/_avichawla/status/1918917563825938645: Page.goto: Object of type HttpUrl is not JSON serializable
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/NikkiSiapno/status/1921822976170655926: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1921822976170655926 (URL: https://x.com/NikkiSiapno/status/1921822976170655926): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/_avichawla/status/1918917563825938645: Page.goto: Object of type HttpUrl is not JSON serializable\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1921822976170655926 (URL: https://x.com/NikkiSiapno/status/1921822976170655926): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1921822976170655926: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/NikkiSiapno/status/1921822976170655926: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1921822976170655926: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/NikkiSiapno/status/1921822976170655926: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1869027339696214251 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1869027339696214251 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1869027339696214251. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1869027339696214251. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/NathanHirsch99/status/1869027339696214251 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/NathanHirsch99/status/1869027339696214251 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1921943565602902111 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1921943565602902111 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1921943565602902111. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1921943565602902111. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/govardhana_mk/status/1921943565602902111 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/NathanHirsch99/status/1869027339696214251: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/govardhana_mk/status/1921943565602902111 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/devops_tech/status/1909859367773483332: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/NathanHirsch99/status/1869027339696214251: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/devops_tech/status/1909859367773483332: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1909859367773483332 (URL: https://x.com/devops_tech/status/1909859367773483332): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1909859367773483332 (URL: https://x.com/devops_tech/status/1909859367773483332): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1909859367773483332: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/devops_tech/status/1909859367773483332: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1909859367773483332: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/devops_tech/status/1909859367773483332: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/rohanpaul_ai/status/1920069397277774228: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/rohanpaul_ai/status/1920069397277774228: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1920069397277774228 (URL: https://x.com/rohanpaul_ai/status/1920069397277774228): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1920069397277774228 (URL: https://x.com/rohanpaul_ai/status/1920069397277774228): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1920069397277774228: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/rohanpaul_ai/status/1920069397277774228: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1920069397277774228: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/rohanpaul_ai/status/1920069397277774228: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1912891173829493173 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1912891173829493173 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1912891173829493173. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1912891173829493173. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/mdancho84/status/1912891173829493173 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/mdancho84/status/1912891173829493173 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1915262328209367334 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1915262328209367334 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1915262328209367334. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1915262328209367334. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/techopsexamples/status/1915262328209367334 via Playwright (sync in thread)...
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/mdancho84/status/1912891173829493173: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/techopsexamples/status/1915262328209367334 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/_avichawla/status/1918917563825938645: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/mdancho84/status/1912891173829493173: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/techopsexamples/status/1915262328209367334: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/_avichawla/status/1918917563825938645: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1918917563825938645 (URL: https://x.com/_avichawla/status/1918917563825938645): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/techopsexamples/status/1915262328209367334: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1918917563825938645 (URL: https://x.com/_avichawla/status/1918917563825938645): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1918917563825938645: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/_avichawla/status/1918917563825938645: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1918917563825938645: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/_avichawla/status/1918917563825938645: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/NathanHirsch99/status/1869027339696214251: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/NathanHirsch99/status/1869027339696214251: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1869027339696214251 (URL: https://x.com/NathanHirsch99/status/1869027339696214251): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1869027339696214251 (URL: https://x.com/NathanHirsch99/status/1869027339696214251): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1869027339696214251: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/NathanHirsch99/status/1869027339696214251: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1869027339696214251: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/NathanHirsch99/status/1869027339696214251: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1910913333945086365 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1910913333945086365 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - asyncio - ERROR - Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111
handle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 111, in <lambda>
    task.add_done_callback(lambda _: g_self.switch())
                                     ^^^^^^^^^^^^^^^
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
	Expected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1910913333945086365. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Exception in callback SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111\nhandle: <Handle SyncBase._sync.<locals>.<lambda>(<Task finishe...about:blank'>>) at /home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py:111>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 111, in <lambda>\n    task.add_done_callback(lambda _: g_self.switch())\n                                     ^^^^^^^^^^^^^^^\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\tExpected: <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) suspended active started main>"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - (Sync) Navigating to tweet page: https://x.com/govardhana_mk/status/1921943565602902111
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1910913333945086365. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/bytebytego/status/1910913333945086365 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Sync) Navigating to tweet page: https://x.com/govardhana_mk/status/1921943565602902111"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/bytebytego/status/1910913333945086365 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1870120582857245173 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1870120582857245173 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1870120582857245173. Current cache_complete: False
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/bytebytego/status/1910913333945086365: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/govardhana_mk/status/1921943565602902111: Page.goto: Object of type HttpUrl is not JSON serializable
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1870120582857245173. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/MatthewBerman/status/1870120582857245173 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/bytebytego/status/1910913333945086365: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/govardhana_mk/status/1921943565602902111: Page.goto: Object of type HttpUrl is not JSON serializable\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/MatthewBerman/status/1870120582857245173 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/mdancho84/status/1912891173829493173: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/MatthewBerman/status/1870120582857245173: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/mdancho84/status/1912891173829493173: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1912891173829493173 (URL: https://x.com/mdancho84/status/1912891173829493173): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/MatthewBerman/status/1870120582857245173: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1912891173829493173 (URL: https://x.com/mdancho84/status/1912891173829493173): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1912891173829493173: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/mdancho84/status/1912891173829493173: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1912891173829493173: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/mdancho84/status/1912891173829493173: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/techopsexamples/status/1915262328209367334: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/techopsexamples/status/1915262328209367334: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1915262328209367334 (URL: https://x.com/techopsexamples/status/1915262328209367334): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1915262328209367334 (URL: https://x.com/techopsexamples/status/1915262328209367334): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1915262328209367334: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/techopsexamples/status/1915262328209367334: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1915262328209367334: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/techopsexamples/status/1915262328209367334: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1891716788620230815 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1891716788620230815 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1891716788620230815. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1891716788620230815. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/sahnlam/status/1891716788620230815 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/sahnlam/status/1891716788620230815 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1886052013386944616 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1886052013386944616 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/sahnlam/status/1891716788620230815: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1886052013386944616. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/sahnlam/status/1891716788620230815: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1886052013386944616. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/sysxplore/status/1886052013386944616 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/sysxplore/status/1886052013386944616 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/bytebytego/status/1910913333945086365: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/bytebytego/status/1910913333945086365: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/sysxplore/status/1886052013386944616: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1910913333945086365 (URL: https://x.com/bytebytego/status/1910913333945086365): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/sysxplore/status/1886052013386944616: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1910913333945086365 (URL: https://x.com/bytebytego/status/1910913333945086365): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1910913333945086365: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/bytebytego/status/1910913333945086365: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1910913333945086365: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/bytebytego/status/1910913333945086365: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/govardhana_mk/status/1921943565602902111: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/govardhana_mk/status/1921943565602902111: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1921943565602902111 (URL: https://x.com/govardhana_mk/status/1921943565602902111): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 410, in _sync_get_tweet_page_details
    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 9024, in goto
    self._sync(
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py", line 552, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py", line 145, in goto
    await self._channel.send("goto", locals_to_params(locals()))
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
TypeError: Page.goto: Object of type HttpUrl is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1921943565602902111 (URL: https://x.com/govardhana_mk/status/1921943565602902111): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 410, in _sync_get_tweet_page_details\n    page.goto(tweet_url, timeout=self.config.playwright_nav_timeout_ms, wait_until='domcontentloaded')\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9024, in goto\n    self._sync(\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 552, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 528, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nTypeError: Page.goto: Object of type HttpUrl is not JSON serializable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1921943565602902111: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/govardhana_mk/status/1921943565602902111: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1921943565602902111: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/govardhana_mk/status/1921943565602902111: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/MatthewBerman/status/1870120582857245173: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/MatthewBerman/status/1870120582857245173: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1870120582857245173 (URL: https://x.com/MatthewBerman/status/1870120582857245173): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1870120582857245173 (URL: https://x.com/MatthewBerman/status/1870120582857245173): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1870120582857245173: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/MatthewBerman/status/1870120582857245173: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1870120582857245173: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/MatthewBerman/status/1870120582857245173: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1919265816899620918 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1919265816899620918 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1919265816899620918. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1919265816899620918. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/tom_doerr/status/1919265816899620918 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/tom_doerr/status/1919265816899620918 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1908781591914049617 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1908781591914049617 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1908781591914049617. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1908781591914049617. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/tom_doerr/status/1919265816899620918: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/SecurityTrybe/status/1908781591914049617 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/tom_doerr/status/1919265816899620918: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/SecurityTrybe/status/1908781591914049617 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1891527731944235385 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1891527731944235385 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1891527731944235385. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1891527731944235385. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/SecurityTrybe/status/1908781591914049617: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/alexxubyte/status/1891527731944235385 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/SecurityTrybe/status/1908781591914049617: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/alexxubyte/status/1891527731944235385 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/sahnlam/status/1891716788620230815: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/sahnlam/status/1891716788620230815: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1891716788620230815 (URL: https://x.com/sahnlam/status/1891716788620230815): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/alexxubyte/status/1891527731944235385: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1891716788620230815 (URL: https://x.com/sahnlam/status/1891716788620230815): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1891716788620230815: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sahnlam/status/1891716788620230815: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/alexxubyte/status/1891527731944235385: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1891716788620230815: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sahnlam/status/1891716788620230815: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/sysxplore/status/1886052013386944616: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/sysxplore/status/1886052013386944616: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1886052013386944616 (URL: https://x.com/sysxplore/status/1886052013386944616): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1886052013386944616 (URL: https://x.com/sysxplore/status/1886052013386944616): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1886052013386944616: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sysxplore/status/1886052013386944616: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1886052013386944616: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/sysxplore/status/1886052013386944616: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1918939111198540266 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1918939111198540266 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1918939111198540266. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1918939111198540266. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/JOBCORNER247/status/1918939111198540266 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/JOBCORNER247/status/1918939111198540266 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1918895825310089634 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1918895825310089634 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/JOBCORNER247/status/1918939111198540266: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1918895825310089634. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/JOBCORNER247/status/1918939111198540266: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1918895825310089634. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/techNmak/status/1918895825310089634 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/techNmak/status/1918895825310089634 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/tom_doerr/status/1919265816899620918: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/techNmak/status/1918895825310089634: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/tom_doerr/status/1919265816899620918: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1919265816899620918 (URL: https://x.com/tom_doerr/status/1919265816899620918): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/techNmak/status/1918895825310089634: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1919265816899620918 (URL: https://x.com/tom_doerr/status/1919265816899620918): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1919265816899620918: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/tom_doerr/status/1919265816899620918: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1919265816899620918: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/tom_doerr/status/1919265816899620918: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/SecurityTrybe/status/1908781591914049617: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/SecurityTrybe/status/1908781591914049617: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1908781591914049617 (URL: https://x.com/SecurityTrybe/status/1908781591914049617): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1908781591914049617 (URL: https://x.com/SecurityTrybe/status/1908781591914049617): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1908781591914049617: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/SecurityTrybe/status/1908781591914049617: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1908781591914049617: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/SecurityTrybe/status/1908781591914049617: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/alexxubyte/status/1891527731944235385: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/alexxubyte/status/1891527731944235385: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1891527731944235385 (URL: https://x.com/alexxubyte/status/1891527731944235385): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1891527731944235385 (URL: https://x.com/alexxubyte/status/1891527731944235385): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1891527731944235385: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/alexxubyte/status/1891527731944235385: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1891527731944235385: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/alexxubyte/status/1891527731944235385: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1880786299449495703 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1880786299449495703 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1880786299449495703. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1880786299449495703. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/e_opore/status/1880786299449495703 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/e_opore/status/1880786299449495703 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1891170983114875313 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1891170983114875313 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/e_opore/status/1880786299449495703: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1891170983114875313. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/e_opore/status/1880786299449495703: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1891170983114875313. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/alexxubyte/status/1891170983114875313 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/alexxubyte/status/1891170983114875313 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Tweet 1868533790915915879 is not cache-complete. Processing.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/alexxubyte/status/1891170983114875313: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Tweet 1868533790915915879 is not cache-complete. Processing."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - INFO - Caching tweet ID: 1868533790915915879. Current cache_complete: False
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/alexxubyte/status/1891170983114875313: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Caching tweet ID: 1868533790915915879. Current cache_complete: False"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Attempting to fetch tweet details for URL https://x.com/NikkiSiapno/status/1868533790915915879 via Playwright (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to fetch tweet details for URL https://x.com/NikkiSiapno/status/1868533790915915879 via Playwright (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/JOBCORNER247/status/1918939111198540266: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/JOBCORNER247/status/1918939111198540266: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - (Sync) Unexpected error scraping tweet page https://x.com/NikkiSiapno/status/1868533790915915879: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1918939111198540266 (URL: https://x.com/JOBCORNER247/status/1918939111198540266): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: (Sync) Unexpected error scraping tweet page https://x.com/NikkiSiapno/status/1868533790915915879: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1918939111198540266 (URL: https://x.com/JOBCORNER247/status/1918939111198540266): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1918939111198540266: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/JOBCORNER247/status/1918939111198540266: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1918939111198540266: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/JOBCORNER247/status/1918939111198540266: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/techNmak/status/1918895825310089634: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/techNmak/status/1918895825310089634: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1918895825310089634 (URL: https://x.com/techNmak/status/1918895825310089634): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1918895825310089634 (URL: https://x.com/techNmak/status/1918895825310089634): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1918895825310089634: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/techNmak/status/1918895825310089634: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1918895825310089634: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/techNmak/status/1918895825310089634: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/e_opore/status/1880786299449495703: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/e_opore/status/1880786299449495703: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1880786299449495703 (URL: https://x.com/e_opore/status/1880786299449495703): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1880786299449495703 (URL: https://x.com/e_opore/status/1880786299449495703): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1880786299449495703: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/e_opore/status/1880786299449495703: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1880786299449495703: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/e_opore/status/1880786299449495703: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/alexxubyte/status/1891170983114875313: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/alexxubyte/status/1891170983114875313: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1891170983114875313 (URL: https://x.com/alexxubyte/status/1891170983114875313): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1891170983114875313 (URL: https://x.com/alexxubyte/status/1891170983114875313): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1891170983114875313: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/alexxubyte/status/1891170983114875313: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1891170983114875313: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/alexxubyte/status/1891170983114875313: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - ERROR - Error running sync tweet detail fetch in thread for https://x.com/NikkiSiapno/status/1868533790915915879: 'HttpUrl' object has no attribute 'split'
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error running sync tweet detail fetch in thread for https://x.com/NikkiSiapno/status/1868533790915915879: 'HttpUrl' object has no attribute 'split'\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.cacher - ERROR - Error during Playwright fetch for 1868533790915915879 (URL: https://x.com/NikkiSiapno/status/1868533790915915879): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 408, in _sync_get_tweet_page_details
    page = self._authenticated_context.new_page()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py", line 12819, in new_page
    return mapping.from_impl(self._sync(self._impl_obj.new_page()))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py", line 113, in _sync
    self._dispatcher_fiber.switch()
greenlet.error: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 637, in get_tweet_details_via_playwright
    details = await asyncio.to_thread(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 541, in _sync_get_tweet_page_details
    self._sync_screenshot_on_error(page, f"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}")
                                                                    ^^^^^^^^^^^^^^^
AttributeError: 'HttpUrl' object has no attribute 'split'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py", line 198, in cache_tweet
    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py", line 644, in get_tweet_details_via_playwright
    raise PlaywrightError(f"Thread execution failed for tweet detail fetch: {e}", original_exception=e) from e
knowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"ERROR","message":"ERROR: Error during Playwright fetch for 1868533790915915879 (URL: https://x.com/NikkiSiapno/status/1868533790915915879): Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 408, in _sync_get_tweet_page_details\n    page = self._authenticated_context.new_page()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 12819, in new_page\n    return mapping.from_impl(self._sync(self._impl_obj.new_page()))\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/.venv/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 113, in _sync\n    self._dispatcher_fiber.switch()\ngreenlet.error: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33d5e980 (otid=0x70db33efe8e0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 637, in get_tweet_details_via_playwright\n    details = await asyncio.to_thread(\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 541, in _sync_get_tweet_page_details\n    self._sync_screenshot_on_error(page, f\"tweet_scrape_unexpected_{tweet_url.split('/')[-1]}\")\n                                                                    ^^^^^^^^^^^^^^^\nAttributeError: 'HttpUrl' object has no attribute 'split'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/processing/cacher.py\", line 198, in cache_tweet\n    tweet_page_details = await playwright_client.get_tweet_details_via_playwright(tweet_url=tweet_data.source_url)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/nepenthe/git_repos/agents/knowledge-base_v2/knowledge_base_agent/interfaces/playwright_client.py\", line 644, in get_tweet_details_via_playwright\n    raise PlaywrightError(f\"Thread execution failed for tweet detail fetch: {e}\", original_exception=e) from e\nknowledge_base_agent.exceptions.PlaywrightError: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - WARNING - Item 1868533790915915879: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/NikkiSiapno/status/1868533790915915879: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Item 1868533790915915879: Phase 'Caching' completed with error: Playwright fetch error for https://x.com/NikkiSiapno/status/1868533790915915879: Error interacting with Playwright: Thread execution failed for tweet detail fetch: 'HttpUrl' object has no attribute 'split' (Caused by: AttributeError: 'HttpUrl' object has no attribute 'split')"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [Caching] Task batch finished gathering.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Caching] Task batch finished gathering."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":52,"current_phase":"Caching (1/1)","current_item_id":"Batch Complete","eta":"00:00:00","total_phases":8,"current_phase_num":2,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Phase: Caching --- (Overall Pipeline Step 2/8) --- (0.92s)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Phase: Caching --- (Overall Pipeline Step 2/8) --- (0.92s)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Successfully saved state. 52 unprocessed, 0 processed.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Successfully saved state. 52 unprocessed, 0 processed."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Overall Phase 2/8: Caching ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Overall Phase 2/8: Caching ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Overall Phase 3/8: Interpretation ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Overall Phase 3/8: Interpretation ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Phase: Interpretation --- (Overall Pipeline Step 3/8)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Phase: Interpretation --- (Overall Pipeline Step 3/8)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [Interpretation] Identified 0 items for processing in this batch.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Interpretation] Identified 0 items for processing in this batch."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"Interpretation (1/1)","current_item_id":"","eta":"00:00:00","total_phases":8,"current_phase_num":3,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [Interpretation] No items required processing in this batch.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Interpretation] No items required processing in this batch."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"Interpretation (1/1)","current_item_id":"None","eta":"00:00:00","total_phases":8,"current_phase_num":3,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Phase: Interpretation --- (Overall Pipeline Step 3/8) --- (0.00s)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Phase: Interpretation --- (Overall Pipeline Step 3/8) --- (0.00s)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Successfully saved state. 52 unprocessed, 0 processed.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Successfully saved state. 52 unprocessed, 0 processed."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Overall Phase 3/8: Interpretation ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Overall Phase 3/8: Interpretation ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Overall Phase 4/8: Categorization ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Overall Phase 4/8: Categorization ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Phase: Categorization --- (Overall Pipeline Step 4/8)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Phase: Categorization --- (Overall Pipeline Step 4/8)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [Categorization] Identified 0 items for processing in this batch.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Categorization] Identified 0 items for processing in this batch."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"Categorization (1/1)","current_item_id":"","eta":"00:00:00","total_phases":8,"current_phase_num":4,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [Categorization] No items required processing in this batch.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Categorization] No items required processing in this batch."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"Categorization (1/1)","current_item_id":"None","eta":"00:00:00","total_phases":8,"current_phase_num":4,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Phase: Categorization --- (Overall Pipeline Step 4/8) --- (0.00s)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Phase: Categorization --- (Overall Pipeline Step 4/8) --- (0.00s)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Successfully saved state. 52 unprocessed, 0 processed.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Successfully saved state. 52 unprocessed, 0 processed."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Overall Phase 4/8: Categorization ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Overall Phase 4/8: Categorization ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Overall Phase 5/8: Generation ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Overall Phase 5/8: Generation ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Phase: Generation --- (Overall Pipeline Step 5/8)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Phase: Generation --- (Overall Pipeline Step 5/8)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [Generation] Identified 0 items for processing in this batch.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Generation] Identified 0 items for processing in this batch."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"Generation (1/1)","current_item_id":"","eta":"00:00:00","total_phases":8,"current_phase_num":5,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [Generation] No items required processing in this batch.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [Generation] No items required processing in this batch."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"Generation (1/1)","current_item_id":"None","eta":"00:00:00","total_phases":8,"current_phase_num":5,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Phase: Generation --- (Overall Pipeline Step 5/8) --- (0.00s)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Phase: Generation --- (Overall Pipeline Step 5/8) --- (0.00s)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Successfully saved state. 52 unprocessed, 0 processed.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Successfully saved state. 52 unprocessed, 0 processed."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Overall Phase 5/8: Generation ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Overall Phase 5/8: Generation ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Overall Phase 6/8: DBSync ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Overall Phase 6/8: DBSync ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Phase: DBSync --- (Overall Pipeline Step 6/8)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Phase: DBSync --- (Overall Pipeline Step 6/8)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [DBSync] Identified 0 items for processing in this batch.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [DBSync] Identified 0 items for processing in this batch."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"DBSync (1/1)","current_item_id":"","eta":"00:00:00","total_phases":8,"current_phase_num":6,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - [DBSync] No items required processing in this batch.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: [DBSync] No items required processing in this batch."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":0,"current_phase":"DBSync (1/1)","current_item_id":"None","eta":"00:00:00","total_phases":8,"current_phase_num":6,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Phase: DBSync --- (Overall Pipeline Step 6/8) --- (0.00s)
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Phase: DBSync --- (Overall Pipeline Step 6/8) --- (0.00s)"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Successfully saved state. 52 unprocessed, 0 processed.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Successfully saved state. 52 unprocessed, 0 processed."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Overall Phase 6/8: DBSync ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Overall Phase 6/8: DBSync ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Overall Phase 7/8: Indexing ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Overall Phase 7/8: Indexing ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - Running Indexing phase (7/8)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Running Indexing phase (7/8)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.indexer - INFO - Generating root README.md for the knowledge base...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Generating root README.md for the knowledge base..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.indexer - WARNING - No generated KB items found to include in the index.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: No generated KB items found to include in the index."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - Indexing phase completed successfully.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Indexing phase completed successfully."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Overall Phase 7/8: Indexing ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Overall Phase 7/8: Indexing ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Starting Overall Phase 8/8: Finalizing ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Starting Overall Phase 8/8: Finalizing ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - Running Finalizing phase (8/8)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Running Finalizing phase (8/8)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - Finalizing state: Checking for fully processed items...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Finalizing state: Checking for fully processed items..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - No additional items were marked as fully processed in this run.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: No additional items were marked as fully processed in this run."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - --- Finished Overall Phase 8/8: Finalizing ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: --- Finished Overall Phase 8/8: Finalizing ---"}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - Agent pipeline run finished successfully.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Agent pipeline run finished successfully."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Attempting to save state to /home/nepenthe/git_repos/agents/knowledge-base_v2/data/processing_state.json..."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.state - INFO - Successfully saved state. 52 unprocessed, 0 processed.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Successfully saved state. 52 unprocessed, 0 processed."}]
2025-05-13 16:13:02 - knowledge_base_agent.processing.pipeline - INFO - Run Statistics:
--- Processing Stats Report ---
Total Run Time: 209.44 seconds

Phase Summary:
  - Caching: Entered=1, Success=1, Failed=0
  - Categorization: Entered=1, Success=1, Failed=0
  - Dbsync: Entered=1, Success=1, Failed=0
  - Finalizing: Entered=1, Success=1, Failed=0
  - Generation: Entered=1, Success=1, Failed=0
  - Indexing: Entered=1, Success=1, Failed=0
  - Interpretation: Entered=1, Success=1, Failed=0

Average LLM Durations (last 20):
  - Interpret: No data
  - Categorize: No data
  - Generate: No data
  Overall Items Processed (Distinct): 0 / 52
--- End Report ---
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Run Statistics:\n--- Processing Stats Report ---\nTotal Run Time: 209.44 seconds\n\nPhase Summary:\n  - Caching: Entered=1, Success=1, Failed=0\n  - Categorization: Entered=1, Success=1, Failed=0\n  - Dbsync: Entered=1, Success=1, Failed=0\n  - Finalizing: Entered=1, Success=1, Failed=0\n  - Generation: Entered=1, Success=1, Failed=0\n  - Indexing: Entered=1, Success=1, Failed=0\n  - Interpretation: Entered=1, Success=1, Failed=0\n\nAverage LLM Durations (last 20):\n  - Interpret: No data\n  - Categorize: No data\n  - Generate: No data\n  Overall Items Processed (Distinct): 0 / 52\n--- End Report ---"}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "status_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["status_update",{"status":"idle","message":"Agent run finished."}]
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "progress_update" to all [/agent]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/agent,["progress_update",{"processed_count":0,"total_items":52,"current_phase":"Finished","current_item_id":"","eta":"00:00:00","total_phases":8,"current_phase_num":8,"overall_items_processed":0,"overall_total_items":52}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.http_client - INFO - Closing shared httpx.AsyncClient.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Closing shared httpx.AsyncClient."}]
2025-05-13 16:13:02 - __main__ - INFO - (Web Thread) Ensuring Playwright client is closed...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: (Web Thread) Ensuring Playwright client is closed..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - Closing PlaywrightClient resources (sync in thread)...
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Closing PlaywrightClient resources (sync in thread)..."}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - WARNING - Error closing authenticated Playwright context: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Error closing authenticated Playwright context: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - WARNING - Error closing Playwright browser: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Error closing Playwright browser: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - WARNING - Error stopping Playwright instance: Cannot switch to a different thread
	Current:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>
	Expected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"WARNING","message":"WARNING: Error stopping Playwright instance: Cannot switch to a different thread\n\tCurrent:  <greenlet.greenlet object at 0x70db33c3d000 (otid=0x70db33c398c0) current active started main>\n\tExpected: <greenlet.greenlet object at 0x70db50269240 (otid=0x70db502741b0) suspended active started main>"}]
2025-05-13 16:13:02 - knowledge_base_agent.interfaces.playwright_client - INFO - PlaywrightClient resources closed.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: PlaywrightClient resources closed."}]
2025-05-13 16:13:02 - __main__ - INFO - Pipeline background thread event loop finished.
2025-05-13 16:13:02 - socketio.server - INFO - emitting event "log_message" to all [/logs]
2025-05-13 16:13:02 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet MESSAGE data 2/logs,["log_message",{"level":"INFO","message":"INFO: Pipeline background thread event loop finished."}]
2025-05-13 16:13:08 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:13:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:13:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:13:58 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:13:58 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:14:23 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:14:23 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:14:48 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:14:48 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:15:13 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:15:13 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:15:38 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:15:38 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:16:03 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:16:03 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:16:28 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:16:28 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:16:53 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:16:53 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:17:18 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:17:18 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:17:43 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:17:43 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:18:08 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:18:08 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:18:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:18:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:18:58 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:18:58 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:19:23 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:19:23 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:19:48 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:19:48 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:20:13 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:20:13 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:20:38 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:20:38 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:21:03 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:21:03 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:21:28 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:21:28 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:21:53 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:21:53 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:22:18 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:22:18 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:22:43 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:22:43 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:23:08 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:23:08 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:23:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:23:33 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:23:58 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:23:58 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:24:23 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:24:23 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:24:48 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:24:48 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:25:13 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:25:13 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:25:38 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:25:38 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
2025-05-13 16:26:03 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Sending packet PING data None
2025-05-13 16:26:03 - engineio.server - INFO - YcmlPW6CGkQUI0L9AAAA: Received packet PONG data 
